var Xenon=function(){"use strict";var e,t="user-agent",i="",r="function",a="undefined",o="object",s="string",n="browser",u="cpu",c="device",l="engine",d="os",h="result",p="name",w="type",m="vendor",b="version",f="architecture",y="major",g="model",v="console",x="mobile",A="tablet",k="smarttv",_="wearable",C="xr",S="embedded",O="inapp",P="brands",T="formFactors",j="fullVersionList",U="platform",E="platformVersion",I="bitness",D="sec-ch-ua",B=D+"-full-version-list",R=D+"-arch",F=D+"-"+I,L=D+"-form-factors",H=D+"-"+x,q=D+"-"+g,N=D+"-"+U,z=N+"-version",M=[P,j,x,g,U,E,f,T,I],V="Amazon",G="Apple",J="ASUS",$="BlackBerry",W="Google",K="Huawei",X="Lenovo",Y="Honor",Z="LG",Q="Microsoft",ee="Motorola",te="Nvidia",ie="OnePlus",re="OPPO",ae="Samsung",oe="Sharp",se="Sony",ne="Xiaomi",ue="Zebra",ce="Chrome",le="Chromium",de="Chromecast",he="Edge",pe="Firefox",we="Opera",me="Facebook",be="Sogou",fe="Mobile ",ye=" Browser",ge="Windows",ve=typeof window!==a&&window.navigator?window.navigator:void 0,xe=ve&&ve.userAgentData?ve.userAgentData:void 0,Ae=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t},ke=function(e,t){if(typeof e===o&&e.length>0){for(var i in e)if(Oe(t)==Oe(e[i]))return!0;return!1}return!!Ce(e)&&Oe(t)==Oe(e)},_e=function(e,t){for(var i in e)return/^(browser|cpu|device|engine|os)$/.test(i)||!!t&&_e(e[i])},Ce=function(e){return typeof e===s},Se=function(e){if(e){for(var t=[],i=je(/\\?\"/g,e).split(","),r=0;r<i.length;r++)if(i[r].indexOf(";")>-1){var a=Ee(i[r]).split(";v=");t[r]={brand:a[0],version:a[1]}}else t[r]=Ee(i[r]);return t}},Oe=function(e){return Ce(e)?e.toLowerCase():e},Pe=function(e){return Ce(e)?je(/[^\d\.]/g,e).split(".")[0]:void 0},Te=function(e){for(var t in e){var i=e[t];typeof i==o&&2==i.length?this[i[0]]=i[1]:this[i]=void 0}return this},je=function(e,t){return Ce(t)?t.replace(e,i):t},Ue=function(e){return je(/\\?\"/g,e)},Ee=function(e,t){if(Ce(e))return e=je(/^\s\s*/,e),typeof t===a?e:e.substring(0,500)},Ie=function(e,t){if(e&&t)for(var i,a,s,n,u,c,l=0;l<t.length&&!u;){var d=t[l],h=t[l+1];for(i=a=0;i<d.length&&!u&&d[i];)if(u=d[i++].exec(e))for(s=0;s<h.length;s++)c=u[++a],typeof(n=h[s])===o&&n.length>0?2===n.length?typeof n[1]==r?this[n[0]]=n[1].call(this,c):this[n[0]]=n[1]:n.length>=3&&(typeof n[1]!==r||n[1].exec&&n[1].test?3==n.length?this[n[0]]=c?c.replace(n[1],n[2]):void 0:4==n.length?this[n[0]]=c?n[3].call(this,c.replace(n[1],n[2])):void 0:n.length>4&&(this[n[0]]=c?n[3].apply(this,[c.replace(n[1],n[2])].concat(n.slice(4))):void 0):n.length>3?this[n[0]]=c?n[1].apply(this,n.slice(2)):void 0:this[n[0]]=c?n[1].call(this,c,n[2]):void 0):this[n]=c||void 0;l+=2}},De=function(e,t){for(var i in t)if(typeof t[i]===o&&t[i].length>0){for(var r=0;r<t[i].length;r++)if(ke(t[i][r],e))return"?"===i?void 0:i}else if(ke(t[i],e))return"?"===i?void 0:i;return t.hasOwnProperty("*")?t["*"]:e},Be={ME:"4.90","NT 3.51":"3.51","NT 4.0":"4.0",2e3:["5.0","5.01"],XP:["5.1","5.2"],Vista:"6.0",7:"6.1",8:"6.2",8.1:"6.3",10:["6.4","10.0"],NT:""},Re={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":void 0},Fe={Chrome:"Google Chrome",Edge:"Microsoft Edge","Edge WebView2":"Microsoft Edge WebView2","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"},Le={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[b,[p,fe+"Chrome"]],[/webview.+edge\/([\w\.]+)/i],[b,[p,he+" WebView"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[b,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,b],[/opios[\/ ]+([\w\.]+)/i],[b,[p,we+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[b,[p,we+" GX"]],[/\bopr\/([\w\.]+)/i],[b,[p,we]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[b,[p,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[b,[p,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser)\/([-\w\.]+)/i,/(heytap|ovi|115|surf)browser\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[p,b],[/quark(?:pc)?\/([-\w\.]+)/i],[b,[p,"Quark"]],[/\bddg\/([\w\.]+)/i],[b,[p,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[b,[p,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[b,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[b,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[b,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[b,[p,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[b,[p,"Smart "+X+ye]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure"+ye],b],[/\bfocus\/([\w\.]+)/i],[b,[p,pe+" Focus"]],[/\bopt\/([\w\.]+)/i],[b,[p,we+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[b,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[b,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[b,[p,we+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[b,[p,"MIUI"+ye]],[/fxios\/([\w\.-]+)/i],[b,[p,fe+pe]],[/\bqihoobrowser\/?([\w\.]*)/i],[b,[p,"360"]],[/\b(qq)\/([\w\.]+)/i],[[p,/(.+)/,"$1Browser"],b],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1"+ye],b],[/samsungbrowser\/([\w\.]+)/i],[b,[p,ae+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[b,[p,be+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[p,be+" Mobile"],b],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[p,b],[/(lbbrowser|rekonq)/i],[p],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[b,p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,me],b,[w,O]],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat|klarna)[\/ ]([-\w\.]+)/i],[p,b,[w,O]],[/\bgsa\/([\w\.]+) .*safari\//i],[b,[p,"GSA"],[w,O]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[b,[p,"TikTok"],[w,O]],[/\[(linkedin)app\]/i],[p,[w,O]],[/(chromium)[\/ ]([-\w\.]+)/i],[p,b],[/headlesschrome(?:\/([\w\.]+)| )/i],[b,[p,ce+" Headless"]],[/wv\).+chrome\/([\w\.]+).+edgw\//i],[b,[p,he+" WebView2"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,ce+" WebView"],b],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[b,[p,"Android"+ye]],[/chrome\/([\w\.]+) mobile/i],[b,[p,fe+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,b],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[b,[p,fe+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[p,fe+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[b,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[b,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[p,b],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[p,fe+pe],b],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],b],[/(wolvic|librewolf)\/([\w\.]+)/i],[p,b],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[b,[p,pe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[p,[b,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[p,[b,/[^\d\.]+./,i]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[f,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[f,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[f,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[f,/ower/,i,Oe]],[/ sun4\w[;\)]/i],[[f,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[f,Oe]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[g,[m,ae],[w,A]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr]|browser)[-\w]+)/i,/sec-(sgh\w+)/i],[g,[m,ae],[w,x]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[g,[m,G],[w,x]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[g,[m,G],[w,A]],[/(macintosh);/i],[g,[m,G]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[g,[m,oe],[w,x]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[g,[m,Y],[w,A]],[/honor([-\w ]+)[;\)]/i],[g,[m,Y],[w,x]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[g,[m,K],[w,A]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[g,[m,K],[w,x]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[g,/_/g," "],[m,ne],[w,A]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[g,/_/g," "],[m,ne],[w,x]],[/droid.+; (cph2[3-6]\d[13579]|((gm|hd)19|(ac|be|in|kb)20|(d[en]|eb|le|mt)21|ne22)[0-2]\d|p[g-k]\w[1m]10)\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[g,[m,ie],[w,x]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[g,[m,re],[w,x]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[g,[m,De,{OnePlus:["203","304","403","404","413","415"],"*":re}],[w,A]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[g,[m,"BLU"],[w,x]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[g,[m,"Vivo"],[w,x]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[g,[m,"Realme"],[w,x]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[g,[m,X],[w,A]],[/lenovo[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i],[g,[m,X],[w,x]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ]([\w\s]+)(\)| bui)/i,/((?:moto(?! 360)[-\w\(\) ]+|xt\d{3,4}[cgkosw\+]?[-\d]*|nexus 6)(?= bui|\)))/i],[g,[m,ee],[w,x]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[g,[m,ee],[w,A]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[g,[m,Z],[w,A]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch|webos))(\w+)/i,/\blg-?([\d\w]+) bui/i],[g,[m,Z],[w,x]],[/(nokia) (t[12][01])/i],[m,g,[w,A]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[g,/_/g," "],[w,x],[m,"Nokia"]],[/(pixel (c|tablet))\b/i],[g,[m,W],[w,A]],[/droid.+;(?: google)? (g(01[13]a|020[aem]|025[jn]|1b60|1f8f|2ybb|4s1m|576d|5nz6|8hhn|8vou|a02099|c15s|d1yq|e2ae|ec77|gh2x|kv4x|p4bc|pj41|r83y|tt9q|ur25|wvk6)|pixel[\d ]*a?( pro)?( xl)?( fold)?( \(5g\))?)( bui|\))/i],[g,[m,W],[w,x]],[/(google) (pixelbook( go)?)/i],[m,g],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-\w\w\d\d)(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[g,[m,se],[w,x]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[g,"Xperia Tablet"],[m,se],[w,A]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[g,[m,V],[w,A]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[g,/(.+)/g,"Fire Phone $1"],[m,V],[w,x]],[/(playbook);[-\w\),; ]+(rim)/i],[g,m,[w,A]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[g,[m,$],[w,x]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[g,[m,J],[w,A]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[g,[m,J],[w,x]],[/(nexus 9)/i],[g,[m,"HTC"],[w,A]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[g,/_/g," "],[w,x]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[g,[m,"TCL"],[w,A]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[g,[m,"TCL"],[w,x]],[/(itel) ((\w+))/i],[[m,Oe],g,[w,De,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[g,[m,"Acer"],[w,A]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[g,[m,"Meizu"],[w,x]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[g,[m,"Ulefone"],[w,x]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[g,[m,"Energizer"],[w,x]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[g,[m,"Cat"],[w,x]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[g,[m,"Smartfren"],[w,x]],[/droid.+; (a(in)?(0(15|59|6[35])|142)p?)/i],[g,[m,"Nothing"],[w,x]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[g,[m,"Archos"],[w,A]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[g,[m,"Archos"],[w,x]],[/; (n159v)/i],[g,[m,"HMD"],[w,x]],[/(imo) (tab \w+)/i,/(infinix|tecno) (x1101b?|p904|dp(7c|8d|10a)( pro)?|p70[1-3]a?|p904|t1101)/i],[m,g,[w,A]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|infinix|lava|oneplus|tcl)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(oppo) ?([\w ]+) bui/i],[m,g,[w,x]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[m,g,[w,A]],[/(surface duo)/i],[g,[m,Q],[w,A]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[g,[m,"Fairphone"],[w,x]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[g,[m,te],[w,A]],[/(sprint) (\w+)/i],[m,g,[w,x]],[/(kin\.[onetw]{3})/i],[[g,/\./g," "],[m,Q],[w,x]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[g,[m,ue],[w,A]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[g,[m,ue],[w,x]],[/smart-tv.+(samsung)/i],[m,[w,k]],[/hbbtv.+maple;(\d+)/i],[[g,/^/,"SmartTV"],[m,ae],[w,k]],[/(vizio)(?: |.+model\/)(\w+-\w+)/i,/tcast.+(lg)e?. ([-\w]+)/i],[m,g,[w,k]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,Z],[w,k]],[/(apple) ?tv/i],[m,[g,G+" TV"],[w,k]],[/crkey.*devicetype\/chromecast/i],[[g,de+" Third Generation"],[m,W],[w,k]],[/crkey.*devicetype\/([^/]*)/i],[[g,/^/,"Chromecast "],[m,W],[w,k]],[/fuchsia.*crkey/i],[[g,de+" Nest Hub"],[m,W],[w,k]],[/crkey/i],[[g,de],[m,W],[w,k]],[/(portaltv)/i],[g,[m,me],[w,k]],[/droid.+aft(\w+)( bui|\))/i],[g,[m,V],[w,k]],[/(shield \w+ tv)/i],[g,[m,te],[w,k]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[g,[m,oe],[w,k]],[/(bravia[\w ]+)( bui|\))/i],[g,[m,se],[w,k]],[/(mi(tv|box)-?\w+) bui/i],[g,[m,ne],[w,k]],[/Hbbtv.*(technisat) (.*);/i],[m,g,[w,k]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,/.+\/(\w+)/,"$1",De,{LG:"lge"}],[g,Ee],[w,k]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[g,[w,k]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:|large screen[\w ]+safari)\b/i],[[w,k]],[/(playstation \w+)/i],[g,[m,se],[w,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[g,[m,Q],[w,v]],[/(ouya)/i,/(nintendo) (\w+)/i,/(retroid) (pocket ([^\)]+))/i],[m,g,[w,v]],[/droid.+; (shield)( bui|\))/i],[g,[m,te],[w,v]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[g,[m,ae],[w,_]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[m,g,[w,_]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[g,[m,re],[w,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[g,[m,G],[w,_]],[/(opwwe\d{3})/i],[g,[m,ie],[w,_]],[/(moto 360)/i],[g,[m,ee],[w,_]],[/(smartwatch 3)/i],[g,[m,se],[w,_]],[/(g watch r)/i],[g,[m,Z],[w,_]],[/droid.+; (wt63?0{2,3})\)/i],[g,[m,ue],[w,_]],[/droid.+; (glass) \d/i],[g,[m,W],[w,C]],[/(pico) (4|neo3(?: link|pro)?)/i],[m,g,[w,C]],[/(quest( \d| pro)?s?).+vr/i],[g,[m,me],[w,C]],[/mobile vr; rv.+firefox/i],[[w,C]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[w,S]],[/(aeobc)\b/i],[g,[m,V],[w,S]],[/(homepod).+mac os/i],[g,[m,G],[w,S]],[/windows iot/i],[[w,S]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[g,[w,De,{mobile:"Mobile",xr:"VR","*":A}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[w,A]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[w,x]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[g,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[b,[p,he+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[p,b],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[b,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[p,b],[/ladybird\//i],[[p,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[b,p]],os:[[/(windows nt) (6\.[23]); arm/i],[[p,/N/,"R"],[b,De,Be]],[/(windows (?:phone|mobile|iot))(?: os)?[\/ ]?([\d\.]*( se)?)/i,/(windows)[\/ ](1[01]|2000|3\.1|7|8(\.1)?|9[58]|me|server 20\d\d( r2)?|vista|xp)/i],[p,b],[/windows nt ?([\d\.\)]*)(?!.+xbox)/i,/\bwin(?=3| ?9|n)(?:nt| 9x )?([\d\.;]*)/i],[[b,/(;|\))/g,"",De,Be],[p,ge]],[/(windows ce)\/?([\d\.]*)/i],[p,b],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[b,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+(haiku|morphos))/i],[[p,"macOS"],[b,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[b,[p,de+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[b,[p,de+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[b,[p,de+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[b,[p,de+" Linux"]],[/crkey\/([\d\.]+)/i],[b,[p,de]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[b,p],[/(ubuntu) ([\w\.]+) like android/i],[[p,/(.+)/,"$1 Touch"],b],[/(harmonyos)[\/ ]?([\d\.]*)/i,/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen)\w*[-\/\.; ]?([\d\.]*)/i],[p,b],[/\(bb(10);/i],[b,[p,$]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[b,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[b,[p,pe+" OS"]],[/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i,/webos(?:[ \/]?|\.tv-20(?=2[2-9]))(\d[\d\.]*)/i],[b,[p,"webOS"]],[/web0s;.+?(?:chr[o0]me|safari)\/(\d+)/i],[[b,De,{25:"120",24:"108",23:"94",22:"87",6:"79",5:"68",4:"53",3:"38",2:"538",1:"537","*":"TV"}],[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[b,[p,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,"Chrome OS"],b],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/linux.+(mint)[\/\(\) ]?([\w\.]*)/i,/(mageia|vectorlinux|fuchsia|arcaos|arch(?= ?linux))[;l ]([\d\.]*)/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire|knoppix)(?: gnu[\/ ]linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/\b(aix)[; ]([1-9\.]{0,4})/i,/(hurd|linux|morphos)(?: (?:arm|x86|ppc)\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) ?(r\d)?/i],[p,b],[/(sunos) ?([\d\.]*)/i],[[p,"Solaris"],b],[/\b(beos|os\/2|amigaos|openvms|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,b]]},He=(e={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}},Te.call(e.init,[[n,[p,b,y,w]],[u,[f]],[c,[w,g,m]],[l,[p,b]],[d,[p,b]]]),Te.call(e.isIgnore,[[n,[b,y]],[l,[b]],[d,[b]]]),Te.call(e.isIgnoreRgx,[[n,/ ?browser$/i],[d,/ ?os$/i]]),Te.call(e.toString,[[n,[p,b]],[u,[f]],[c,[m,g]],[l,[p,b]],[d,[p,b]]]),e),qe=function(e,t){var r=He.init[t],o=He.isIgnore[t]||0,s=He.isIgnoreRgx[t]||0,n=He.toString[t]||0;function u(){Te.call(this,r)}return u.prototype.getItem=function(){return e},u.prototype.withClientHints=function(){return xe?xe.getHighEntropyValues(M).then((function(t){return e.setCH(new Ne(t,!1)).parseCH().get()})):e.parseCH().get()},u.prototype.withFeatureCheck=function(){return e.detectFeature().get()},t!=h&&(u.prototype.is=function(e){var t=!1;for(var i in this)if(this.hasOwnProperty(i)&&!ke(o,i)&&Oe(s?je(s,this[i]):this[i])==Oe(s?je(s,e):e)){if(t=!0,e!=a)break}else if(e==a&&t){t=!t;break}return t},u.prototype.toString=function(){var e=i;for(var t in n)typeof this[n[t]]!==a&&(e+=(e?" ":i)+this[n[t]]);return e||a}),xe||(u.prototype.then=function(e){var t=this,i=function(){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])};i.prototype={is:u.prototype.is,toString:u.prototype.toString};var r=new i;return e(r),r}),new u};function Ne(e,t){if(e=e||{},Te.call(this,M),t)Te.call(this,[[P,Se(e[D])],[j,Se(e[B])],[x,/\?1/.test(e[H])],[g,Ue(e[q])],[U,Ue(e[N])],[E,Ue(e[z])],[f,Ue(e[R])],[T,Se(e[L])],[I,Ue(e[F])]]);else for(var i in e)this.hasOwnProperty(i)&&typeof e[i]!==a&&(this[i]=e[i])}function ze(e,t,i,o){return this.get=function(e){return e?this.data.hasOwnProperty(e)?this.data[e]:void 0:this.data},this.set=function(e,t){return this.data[e]=t,this},this.setCH=function(e){return this.uaCH=e,this},this.detectFeature=function(){if(ve&&ve.userAgent==this.ua)switch(this.itemType){case n:ve.brave&&typeof ve.brave.isBrave==r&&this.set(p,"Brave");break;case c:!this.get(w)&&xe&&xe[x]&&this.set(w,x),"Macintosh"==this.get(g)&&ve&&typeof ve.standalone!==a&&ve.maxTouchPoints&&ve.maxTouchPoints>2&&this.set(g,"iPad").set(w,A);break;case d:!this.get(p)&&xe&&xe[U]&&this.set(p,xe[U]);break;case h:var e=this.data,t=function(t){return e[t].getItem().detectFeature().get()};this.set(n,t(n)).set(u,t(u)).set(c,t(c)).set(l,t(l)).set(d,t(d))}return this},this.parseUA=function(){return this.itemType!=h&&Ie.call(this.data,this.ua,this.rgxMap),this.itemType==n&&this.set(y,Pe(this.get(b))),this},this.parseCH=function(){var e=this.uaCH,t=this.rgxMap;switch(this.itemType){case n:case l:var i,r=e[j]||e[P];if(r)for(var a in r){var o=r[a].brand||r[a],s=r[a].version;this.itemType==n&&!/not.a.brand/i.test(o)&&(!i||/Chrom/.test(i)&&o!=le||i==he&&/WebView2/.test(o))&&(o=De(o,Fe),(i=this.get(p))&&!/Chrom/.test(i)&&/Chrom/.test(o)||this.set(p,o).set(b,s).set(y,Pe(s)),i=o),this.itemType==l&&o==le&&this.set(b,s)}break;case u:var v=e[f];v&&(v&&"64"==e[I]&&(v+="64"),Ie.call(this.data,v+";",t));break;case c:if(e[x]&&this.set(w,x),e[g]&&(this.set(g,e[g]),!this.get(w)||!this.get(m))){var A={};Ie.call(A,"droid 9; "+e[g]+")",t),!this.get(w)&&A.type&&this.set(w,A.type),!this.get(m)&&A.vendor&&this.set(m,A.vendor)}if(e[T]){var k;if("string"!=typeof e[T])for(var _=0;!k&&_<e[T].length;)k=De(e[T][_++],Re);else k=De(e[T],Re);this.set(w,k)}break;case d:var C=e[U];if(C){var S=e[E];C==ge&&(S=parseInt(Pe(S),10)>=13?"11":"10"),this.set(p,C).set(b,S)}this.get(p)==ge&&"Xbox"==e[g]&&this.set(p,"Xbox").set(b,void 0);break;case h:var O=this.data,D=function(t){return O[t].getItem().setCH(e).parseCH().get()};this.set(n,D(n)).set(u,D(u)).set(c,D(c)).set(l,D(l)).set(d,D(d))}return this},Te.call(this,[["itemType",e],["ua",t],["uaCH",o],["rgxMap",i],["data",qe(this,e)]]),this}function Me(e,a,p){if(typeof e===o?(_e(e,!0)?(typeof a===o&&(p=a),a=e):(p=e,a=void 0),e=void 0):typeof e!==s||_e(a,!0)||(p=a,a=void 0),p&&typeof p.append===r){var w={};p.forEach((function(e,t){w[t]=e})),p=w}if(!(this instanceof Me))return new Me(e,a,p).getResult();var m=typeof e===s?e:p&&p[t]?p[t]:ve&&ve.userAgent?ve.userAgent:i,b=new Ne(p,!0),f=a?function(e,t){var i={},r=t;if(!_e(t))for(var a in r={},t)for(var o in t[a])r[o]=t[a][o].concat(r[o]?r[o]:[]);for(var s in e)i[s]=r[s]&&r[s].length%2==0?r[s].concat(e[s]):e[s];return i}(Le,a):Le,y=function(e){return e==h?function(){return new ze(e,m,f,b).set("ua",m).set(n,this.getBrowser()).set(u,this.getCPU()).set(c,this.getDevice()).set(l,this.getEngine()).set(d,this.getOS()).get()}:function(){return new ze(e,m,f[e],b).parseUA().get()}};return Te.call(this,[["getBrowser",y(n)],["getCPU",y(u)],["getDevice",y(c)],["getEngine",y(l)],["getOS",y(d)],["getResult",y(h)],["getUA",function(){return m}],["setUA",function(e){return Ce(e)&&(m=e.length>500?Ee(e,500):e),this}]]).setUA(m),this}Me.VERSION="2.0.4",Me.BROWSER=Ae([p,b,y,w]),Me.CPU=Ae([f]),Me.DEVICE=Ae([g,m,w,v,x,k,A,_,S]),Me.ENGINE=Me.OS=Ae([p,b]);var Ve="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Ge="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==Ve&&Ve||{},Je="URLSearchParams"in Ge,$e="Symbol"in Ge&&"iterator"in Symbol,We="FileReader"in Ge&&"Blob"in Ge&&function(){try{return new Blob,!0}catch(e){return!1}}(),Ke="FormData"in Ge,Xe="ArrayBuffer"in Ge;if(Xe)var Ye=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Ze=ArrayBuffer.isView||function(e){return e&&Ye.indexOf(Object.prototype.toString.call(e))>-1};function Qe(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function et(e){return"string"!=typeof e&&(e=String(e)),e}function tt(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return $e&&(t[Symbol.iterator]=function(){return t}),t}function it(e){this.map={},e instanceof it?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function rt(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function at(e){return new Promise((function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}}))}function ot(e){var t=new FileReader,i=at(t);return t.readAsArrayBuffer(e),i}function st(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function nt(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:We&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:Ke&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:Je&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():Xe&&We&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=st(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Xe&&(ArrayBuffer.prototype.isPrototypeOf(e)||Ze(e))?this._bodyArrayBuffer=st(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Je&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},We&&(this.blob=function(){var e=rt(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=rt(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(We)return this.blob().then(ot);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,i,r,a,o=rt(this);if(o)return o;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,i=at(t),r=/charset=([A-Za-z0-9_-]+)/.exec(e.type),a=r?r[1]:"utf-8",t.readAsText(e,a),i;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),i=new Array(t.length),r=0;r<t.length;r++)i[r]=String.fromCharCode(t[r]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Ke&&(this.formData=function(){return this.text().then(lt)}),this.json=function(){return this.text().then(JSON.parse)},this}it.prototype.append=function(e,t){e=Qe(e),t=et(t);var i=this.map[e];this.map[e]=i?i+", "+t:t},it.prototype.delete=function(e){delete this.map[Qe(e)]},it.prototype.get=function(e){return e=Qe(e),this.has(e)?this.map[e]:null},it.prototype.has=function(e){return this.map.hasOwnProperty(Qe(e))},it.prototype.set=function(e,t){this.map[Qe(e)]=et(t)},it.prototype.forEach=function(e,t){for(var i in this.map)this.map.hasOwnProperty(i)&&e.call(t,this.map[i],i,this)},it.prototype.keys=function(){var e=[];return this.forEach((function(t,i){e.push(i)})),tt(e)},it.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),tt(e)},it.prototype.entries=function(){var e=[];return this.forEach((function(t,i){e.push([i,t])})),tt(e)},$e&&(it.prototype[Symbol.iterator]=it.prototype.entries);var ut=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function ct(e,t){if(!(this instanceof ct))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,r,a=(t=t||{}).body;if(e instanceof ct){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new it(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,a||null==e._bodyInit||(a=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new it(t.headers)),this.method=(i=t.method||this.method||"GET",r=i.toUpperCase(),ut.indexOf(r)>-1?r:i),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in Ge)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(a),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function lt(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var i=e.split("="),r=i.shift().replace(/\+/g," "),a=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(a))}})),t}function dt(e,t){if(!(this instanceof dt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new it(t.headers),this.url=t.url||"",this._initBody(e)}ct.prototype.clone=function(){return new ct(this,{body:this._bodyInit})},nt.call(ct.prototype),nt.call(dt.prototype),dt.prototype.clone=function(){return new dt(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new it(this.headers),url:this.url})},dt.error=function(){var e=new dt(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var ht=[301,302,303,307,308];dt.redirect=function(e,t){if(-1===ht.indexOf(t))throw new RangeError("Invalid status code");return new dt(null,{status:t,headers:{location:e}})};var pt=Ge.DOMException;try{new pt}catch(e){(pt=function(e,t){this.message=e,this.name=t;var i=Error(e);this.stack=i.stack}).prototype=Object.create(Error.prototype),pt.prototype.constructor=pt}function wt(e,t){return new Promise((function(i,r){var a=new ct(e,t);if(a.signal&&a.signal.aborted)return r(new pt("Aborted","AbortError"));var o=new XMLHttpRequest;function s(){o.abort()}if(o.onload=function(){var e,t,r={statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new it,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var i=e.split(":"),r=i.shift().trim();if(r){var a=i.join(":").trim();try{t.append(r,a)}catch(e){console.warn("Response "+e.message)}}})),t)};0===a.url.indexOf("file://")&&(o.status<200||o.status>599)?r.status=200:r.status=o.status,r.url="responseURL"in o?o.responseURL:r.headers.get("X-Request-URL");var s="response"in o?o.response:o.responseText;setTimeout((function(){i(new dt(s,r))}),0)},o.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},o.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request timed out"))}),0)},o.onabort=function(){setTimeout((function(){r(new pt("Aborted","AbortError"))}),0)},o.open(a.method,function(e){try{return""===e&&Ge.location.href?Ge.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?o.withCredentials=!0:"omit"===a.credentials&&(o.withCredentials=!1),"responseType"in o&&(We?o.responseType="blob":Xe&&(o.responseType="arraybuffer")),t&&"object"==typeof t.headers&&!(t.headers instanceof it||Ge.Headers&&t.headers instanceof Ge.Headers)){var n=[];Object.getOwnPropertyNames(t.headers).forEach((function(e){n.push(Qe(e)),o.setRequestHeader(e,et(t.headers[e]))})),a.headers.forEach((function(e,t){-1===n.indexOf(t)&&o.setRequestHeader(t,e)}))}else a.headers.forEach((function(e,t){o.setRequestHeader(t,e)}));a.signal&&(a.signal.addEventListener("abort",s),o.onreadystatechange=function(){4===o.readyState&&a.signal.removeEventListener("abort",s)}),o.send(void 0===a._bodyInit?null:a._bodyInit)}))}async function mt(e){if(e.status>=200&&e.status<400)return e;if(e.status>=400&&e.status<500){const t=await e.json(),i=new Error(t.error_message);return i.response=e,i.details=t,i.authIssue=!0,Promise.reject(i)}const t=new Error(e.statusText);return t.response=e,Promise.reject(t)}wt.polyfill=!0,Ge.fetch||(Ge.fetch=wt,Ge.Headers=it,Ge.Request=ct,Ge.Response=dt),self.fetch.bind(self);class bt{constructor(e={}){const{name:t,method:i,headers:r,url:a,skipName:o,authenticated:s,apiUrl:n}=e;this.authenticated=s||!1,this.skipName=o||!1,this.name=t||"ApiBase",this.method=i||"POST",this.headers=r||{"content-type":"application/json"},this.apiUrl=n||null!=n?n:"https://app.xenonview.com",this.path_=a||""}params(e){return{}}path(e){return this.path_}fetch({data:e}={}){let t={};try{t=this.params(e)}catch(e){return Promise.reject(e)}let i={method:this.method,headers:this.headers};if(Object.keys(t).length||!this.skipName){let e={parameters:t};this.skipName||(e.name=this.name);const r=JSON.stringify(e);i.body=r}if(this.authenticated){const{token:t}=e;if(!t)return Promise.reject(new Error("No token and authenticated!"));i.accessToken=t}return function(e,{accessToken:t,headers:i,...r}={}){return r={credentials:"same-origin",keepalive:!0,headers:{accept:"application/json",...t?{authorization:`Bearer ${t}`}:{},...i},...r},fetch(e,r).then(mt).then((e=>[204,304].includes(e.status)?{}:e.json())).catch((e=>{if(e instanceof TypeError){const e=new Error("Your internet connection appears to have gone down.");return e.noNet=!0,Promise.reject(e)}return Promise.reject(e)}))}(`${this.apiUrl}/${this.path(e)}`,i)}}class ft extends bt{constructor(e){super({name:"ApiJourney",url:"journey",apiUrl:e,authenticated:!0})}params(e){let t=function(e){const{journey:t}=e;return t?{journey:t}:{}}(e);const{id:i,timestamp:r}=e;return t.uuid=i,t.timestamp=r,t}}function yt(e){return new ft(e)}class gt extends bt{constructor(e){super({name:"ApiHeartbeat",url:"heartbeat",apiUrl:e,authenticated:!0})}params(e){let t=function(e){const{journey:t}=e;return t?{journey:t}:{}}(e);const{id:i,tags:r,platform:a,timestamp:o,watchdog:s}=e;return t.uuid=i,t.timestamp=o,t.tags=r,t.platform=a,s&&(t.watchdog=s),t}}function vt(e){return new gt(e)}class xt extends bt{constructor(e){super({name:"ApiDeanonymize",url:"deanonymize",apiUrl:e,authenticated:!0})}params(e){const{id:t,person:i,timestamp:r}=e;if(!i)throw new Error("No person data received.");let a={};return a.uuid=t,a.person=i,a.timestamp=r,a}}function At(e){return new xt(e)}class kt extends bt{constructor(e){super({name:"ApiSample",url:"sample",apiUrl:e,authenticated:!0})}params(e){const{id:t}=e;let i={};return i.uuid=t,i}}function _t(e){return new kt(e)}class Ct extends bt{constructor(e){super({name:"ApiIncrementCount",url:"increment_count",apiUrl:e,authenticated:!0})}params(e){const{uid:t,timestamp:i,outcome:r,content:a,value:o}=e,{leadSource:s,leadCampaign:n,leadGuid:u}=a;let c={};return c.uid=t,c.timestamp=i,c.outcome=r,c.leadSource=s,c.leadCampaign=n,c.leadGuid=u,c.value=o,c}}function St(e){return new Ct(e)}class Ot extends bt{constructor(e){super({name:"ApiErrorLog",url:"error_log",apiUrl:e,authenticated:!0})}params(e){const{log:t}=e;let i={};return i.log=t,i}}function Pt(e){return new Ot(e)}const Tt={},jt={setItem:(e,t)=>Tt[e]=t,getItem:e=>Tt[e],removeItem:e=>delete Tt[e]},Ut={},Et={setItem:(e,t)=>Ut[e]=t,getItem:e=>Ut[e],removeItem:e=>delete Ut[e]};class It{constructor(e){this._underlying=e}async setItem(e,t){await this._underlying.setItem(e,t)}async getItem(e){return await this._underlying.getItem(e)}async removeItem(e){await this._underlying.removeItem(e)}}function Dt(){if("undefined"!=typeof window&&void 0!==window&&window&&window.localStorage)return window.localStorage;const e="undefined"!=typeof self&&self.browser?self.browser:null;return void 0!==e&&void 0!==e&&e&&e.localStorage?new It(e.localStorage):Et}function Bt(){if("undefined"!=typeof window&&void 0!==window&&window&&window.sessionStorage)return window.sessionStorage;const e="undefined"!=typeof self&&self.browser?self.browser:null;return void 0!==e&&void 0!==e&&e&&e.sessionStorage?new It(e.sessionStorage):jt}async function Rt(e,t){const i=Dt();await i.setItem(e,JSON.stringify(t))}async function Ft(e){const t=Dt(),i=await t.getItem(e);return i?JSON.parse(i):null}async function Lt(e){const t=Dt();await t.removeItem(e)}async function Ht(e,t){const i=Bt();await i.setItem(e,JSON.stringify(t))}async function qt(e){const t=Bt(),i=await t.getItem(e);return i?JSON.parse(i):null}async function Nt(e){const t=Bt();await t.removeItem(e)}const zt=new class{constructor(e=null,t="https://app.xenonview.com",i="https://counts.xenonlab.ai",r=yt,a=At,o=vt,s=_t,n=St,u=Pt){this.JourneyApi=r,this.DeanonApi=a,this.HeartbeatApi=o,this.SampleApi=s,this.CountApi=n,this.ErrorLogApi=u,this.pageURL_=null,this.restoreJourney=[],this.apiCallPending=!1,this.apiUrl=t,this.countApiUrl=i}version(){return"v0.2.2.1"}async init(e,t="https://app.xenonview.com",i=null){this.apiUrl=t,this.apiKey=e,await this.id(),await this.journey()||await this.storeJourney([]),await this.sampleDecision(null,i),this.apiCallPending=!1}async ecomAbandonment(){await Rt("heartbeat_type","ecom"),await this.heartbeatState(0)}async customAbandonment(e){await Rt("heartbeat_type","custom"),await Rt("heartbeat_outcome",e),await this.heartbeatState(0)}async cancelAbandonment(){await Rt("heartbeat_type","custom"),await Rt("heartbeat_outcome",{remove:!0}),await this.heartbeatState(0)}async platform(e,t,i,r){const a={softwareVersion:e,deviceModel:t,operatingSystemName:i,operatingSystemVersion:r};await Ht("view-platform",a)}async removePlatform(){await Nt("view-platform")}async variant(e){await Ht("view-tags",e)}async resetVariants(){await Nt("view-tags")}async startVariant(e){let t=await qt("view-tags");t&&t.includes(e)||(await this.resetVariants(),await this.variant([e]))}async addVariant(e){let t=await qt("view-tags");t&&t.includes(e)||(t?t.push(e):t=[e],await this.variant(t))}async leadAttributed(e,t=null){await this.count("Attribution")}async leadUnattributed(){await this.count("Attribution")}async leadCaptured(e){const t={superOutcome:"Lead Capture",outcome:e,result:"success"};await this.outcomeAdd(t)}async leadCaptureDeclined(e){const t={superOutcome:"Lead Capture",outcome:e,result:"fail"};await this.outcomeAdd(t)}async accountSignup(e){const t={superOutcome:"Account Signup",outcome:e,result:"success"};await this.outcomeAdd(t)}async accountSignupDeclined(e){const t={superOutcome:"Account Signup",outcome:e,result:"fail"};await this.outcomeAdd(t)}async applicationInstalled(){await this.outcomeAdd({superOutcome:"Application Installation",outcome:"Installed",result:"success"})}async applicationNotInstalled(){await this.outcomeAdd({superOutcome:"Application Installation",outcome:"Not Installed",result:"fail"})}async initialSubscription(e,t=null,i=null,r=null){const a={superOutcome:"Initial Subscription",outcome:"Subscribe - "+e,result:"success"};t&&(a.method=t),i&&(a.price=i),r&&(a.term=r),await this.outcomeAdd(a)}async subscriptionDeclined(e,t=null,i=null,r=null){const a={superOutcome:"Initial Subscription",outcome:"Decline - "+e,result:"fail"};t&&(a.method=t),i&&(a.price=i),r&&(a.term=r),await this.outcomeAdd(a)}async subscriptionRenewed(e,t=null,i=null,r=null){const a={superOutcome:"Subscription Renewal",outcome:"Renew - "+e,result:"success"};t&&(a.method=t),i&&(a.price=i),r&&(a.term=r),await this.outcomeAdd(a)}async subscriptionPaused(e,t=null,i=null,r=null){const a={superOutcome:"Subscription Renewal",outcome:"Paused - "+e,result:"fail"};t&&(a.method=t),i&&(a.price=i),r&&(a.term=r),await this.outcomeAdd(a)}async subscriptionCanceled(e,t=null,i=null,r=null){const a={superOutcome:"Subscription Renewal",outcome:"Cancel - "+e,result:"fail"};t&&(a.method=t),i&&(a.price=i),r&&(a.term=r),await this.outcomeAdd(a)}async subscriptionUpsold(e,t=null,i=null,r=null){const a={superOutcome:"Subscription Upsold",outcome:"Upsold - "+e,result:"success"};t&&(a.method=t),i&&(a.price=i),r&&(a.term=r),await this.outcomeAdd(a)}async subscriptionUpsellDeclined(e,t=null,i=null,r=null){const a={superOutcome:"Subscription Upsold",outcome:"Declined - "+e,result:"fail"};t&&(a.method=t),i&&(a.price=i),r&&(a.term=r),await this.outcomeAdd(a)}async subscriptionDownsell(e,t=null,i=null,r=null){const a={superOutcome:"Subscription Upsold",outcome:"Downsell - "+e,result:"fail"};t&&(a.method=t),i&&(a.price=i),r&&(a.term=r),await this.outcomeAdd(a)}async adClicked(e,t=null,i=null){const r={superOutcome:"Advertisement",outcome:"Ad Click - "+e,result:"success"};t&&(r.id=t),i&&(r.price=i),await this.outcomeAdd(r)}async adIgnored(e,t=null,i=null){const r={superOutcome:"Advertisement",outcome:"Ad Ignored - "+e,result:"fail"};t&&(r.id=t),i&&(r.price=i),await this.outcomeAdd(r)}async referral(e,t=null){const i={superOutcome:"Referral",outcome:"Referred - "+e,result:"success"};t&&(i.details=t),await this.outcomeAdd(i)}async referralDeclined(e,t=null){const i={superOutcome:"Referral",outcome:"Declined - "+e,result:"fail"};t&&(i.details=t),await this.outcomeAdd(i)}async productAddedToCart(e,t=null){const i={superOutcome:"Add Product To Cart",outcome:"Add - "+e,result:"success"};t?i.price=t:t=0,await this.outcomeAdd(i),await this.heartbeatState(1),await this.count("Add To Cart",t,[e])}async productNotAddedToCart(e){const t={superOutcome:"Add Product To Cart",outcome:"Ignore - "+e,result:"fail"};await this.outcomeAdd(t)}async upsold(e,t=null){const i={superOutcome:"Upsold Product",outcome:"Upsold - "+e,result:"success"};t?i.price=t:t=0,await this.outcomeAdd(i),await this.count("Upsell",t,[e])}async upsellDismissed(e,t=null){const i={superOutcome:"Upsold Product",outcome:"Dismissed - "+e,result:"fail"};t&&(i.price=t),await this.outcomeAdd(i)}async checkOut(e=null){let t="Check Out",i="Check Out";null!=e&&(t="Check Out - "+e,i="Checkout:"+e);const r={superOutcome:"Customer Checkout",outcome:t,result:"success"};await this.outcomeAdd(r),await this.heartbeatState(2),await this.count(i)}async checkoutCanceled(){await this.outcomeAdd({superOutcome:"Customer Checkout",outcome:"Canceled",result:"fail"})}async productRemoved(e){const t={superOutcome:"Customer Checkout",outcome:"Product Removed - "+e,result:"fail"};await this.outcomeAdd(t)}async purchase(e,t=null,i=null,r=null,a=null){let o="Purchase",s="Purchase";if(null!=a&&(o="Purchase - "+a,s="Purchase:"+a),!Array.isArray(e)){const t=e.toString();e=t.split(",").map((e=>e.trim()))}const n={superOutcome:"Customer Purchase",outcome:o,skus:e,result:"success"};t?n.price=t:t=0,i&&(n.discount=i),r&&(n.shipping=r),await this.outcomeAdd(n),await this.heartbeatState(3),await this.count(s,t,e)}async purchaseCancel(e=null,t=null){const i={superOutcome:"Customer Purchase",outcome:"Canceled"+(e?" - "+e:""),result:"fail"};t&&(i.price=t),await this.outcomeAdd(i)}async promiseFulfilled(){await this.outcomeAdd({superOutcome:"Promise Fulfillment",outcome:"Fulfilled",result:"success"})}async promiseUnfulfilled(){await this.outcomeAdd({superOutcome:"Promise Fulfillment",outcome:"Unfulfilled",result:"fail"})}async productKept(e){const t={superOutcome:"Product Disposition",outcome:"Kept - "+e,result:"success"};await this.outcomeAdd(t)}async productReturned(e){const t={superOutcome:"Product Disposition",outcome:"Returned - "+e,result:"fail"};await this.outcomeAdd(t)}async featureAttempted(e,t=null){const i={category:"Feature",action:"Attempted",name:e};t&&(i.details=t),await this.journeyAdd(i)}async featureCompleted(e,t=null){const i={category:"Feature",action:"Completed",name:e};t&&(i.details=t),await this.journeyAdd(i)}async featureFailed(e,t=null){const i={category:"Feature",action:"Failed",name:e};t&&(i.details=t),await this.journeyAdd(i)}async contentViewed(e,t=null){const i={category:"Content",action:"Viewed",type:e};t&&(i.identifier=t),await this.journeyAdd(i)}async contentEdited(e,t=null,i=null){const r={category:"Content",action:"Edited",type:e};t&&(r.identifier=t),i&&(r.details=i),await this.journeyAdd(r)}async contentCreated(e,t=null){const i={category:"Content",action:"Created",type:e};t&&(i.identifier=t),await this.journeyAdd(i)}async contentDeleted(e,t=null){const i={category:"Content",action:"Deleted",type:e};t&&(i.identifier=t),await this.journeyAdd(i)}async contentArchived(e,t=null){const i={category:"Content",action:"Archived",type:e};t&&(i.identifier=t),await this.journeyAdd(i)}async contentRequested(e,t=null){const i={category:"Content",action:"Requested",type:e};t&&(i.identifier=t),await this.journeyAdd(i)}async contentSearched(e){const t={category:"Content",action:"Searched",type:e};await this.journeyAdd(t)}async pageLoadTime(e,t){const i={category:"Webpage Load Time",time:e.toString(),identifier:t};await this.journeyAdd(i)}async milestone(e,t,i,r){const a={category:e,action:t,name:i,details:r};await this.journeyAdd(a)}async count(e,t=0,i=null,r=!1){const a=await qt("view-attribution");if(!a)return Promise.resolve(!0);const o=await qt("view-platform");let s={data:{uid:await this.id(),token:this.apiKey,timestamp:(new Date).getTime()/1e3,outcome:e,content:a,platform:o||null,skus:i,value:t}},n=await qt("view-count-replay");n?n.push(s):n=[s],await Ht("view-count-replay",n);try{let e=null;for(;n.length>0;){const t=n.shift();e=await this.CountApi(this.countApiUrl).fetch(t),await Ht("view-count-replay",n)}return e}catch(e){return r?Promise.reject(e):Promise.resolve(!0)}}async heartbeatState(e=null){const t=await Ft("heartbeat_stage");return e&&e>t&&await Rt("heartbeat_stage",e),e||t||await Rt("heartbeat_stage",0),Number(await Ft("heartbeat_stage"))}async commit(e=!1){if(!await this.sampleDecision()||this.apiCallPending)return Promise.resolve(!0);this.apiCallPending=!0;let t={data:{id:await this.id(),journey:await this.journey(),token:this.apiKey,timestamp:(new Date).getTime()/1e3}};const i=await this.reset();try{const e=await this.JourneyApi(this.apiUrl).fetch(t);return this.apiCallPending=!1,Promise.resolve(e)}catch(t){return await this.restore(i),this.apiCallPending=!1,e?Promise.reject(t):Promise.resolve(!0)}}async heartbeatMessage(e){const t=await this.heartbeatState(),i={ecom:{0:{expires_in_seconds:600,if_abandoned:{superOutcome:"Add Product To Cart",outcome:"Abandoned",result:"fail"}},1:{expires_in_seconds:600,if_abandoned:{superOutcome:"Customer Checkout",outcome:"Abandoned",result:"fail"}},2:{expires_in_seconds:600,if_abandoned:{superOutcome:"Customer Purchase",outcome:"Abandoned",result:"fail"}},3:{remove:!0}}};return Object.keys(i).includes(e)?i[e][t]:await Ft("heartbeat_outcome")}async heartbeat(e=!1){const t=await qt("view-platform"),i=await qt("view-tags");let r={data:{id:await this.id(),journey:await this.journey(),token:this.apiKey,platform:t||{},tags:i||[],timestamp:(new Date).getTime()/1e3}};const a=await Ft("heartbeat_type");if(a&&(r.data.watchdog=await this.heartbeatMessage(a)),!await this.sampleDecision()||this.apiCallPending)return Promise.resolve(!0);this.apiCallPending=!0;const o=await this.reset();try{const e=await this.HeartbeatApi(this.apiUrl).fetch(r);return a&&Object.keys(r.data.watchdog).includes("remove")&&(await Lt("heartbeat_stage"),await Lt("heartbeat_type"),await Lt("heartbeat_outcome")),this.apiCallPending=!1,Promise.resolve(e)}catch(t){return await this.restore(o),this.apiCallPending=!1,e?Promise.reject(t):Promise.resolve(!0)}}async deanonymize(e){if(!await this.sampleDecision())return Promise.resolve(!0);let t={data:{id:await this.id(),person:e,token:this.apiKey,timestamp:(new Date).getTime()/1e3}};return await this.DeanonApi(this.apiUrl).fetch(t)}async recordError(e){if(!await this.sampleDecision())return Promise.resolve(!0);let t={data:{log:e,token:this.apiKey}};return await this.ErrorLogApi(this.apiUrl).fetch(t)}async id(e){return e&&await Ht("xenon-view",e),(e=await qt("xenon-view"))&&""!==e?e:await this.newId()}async newId(){return await Ht("xenon-view",crypto.randomUUID()),await qt("xenon-view")}async sampleDecision(e=null,t=null){if(null!==e&&await Ht("xenon-will-sample",e),null===(e=await qt("xenon-will-sample"))||""===e){let i={data:{id:await this.id(),token:this.apiKey}};try{const r=await this.SampleApi(this.apiUrl).fetch(i);e=await this.sampleDecision(r.sample,t)}catch(i){if(i.authIssue&&t)return void t(i);e=await this.sampleDecision(!0,t)}}return e=Boolean(e)}async outcomeAdd(e){let t=await qt("view-platform");t&&(e.platform=t);let i=await qt("view-tags");i&&(e.tags=i),await this.journeyAdd(e)}async journeyAdd(e){let t=await this.journey();if(e.timestamp=(new Date).getTime()/1e3,this.pageURL_&&(e.url=this.pageURL_),t&&t.length){let i=t[t.length-1];if(this.isDuplicate(i,e)){let e=i.hasOwnProperty("count")?i.count:1;i.count=e+1}else t.push(e)}else t=[e];await this.storeJourney(t)}isDuplicate(e,t){const i=Object.keys(e),r=Object.keys(t);return!!((e,t)=>{for(const i of t)if(!e.has(i))return!1;return!0})(new Set(i),new Set(r))&&(!(!r.includes("category")||!i.includes("category"))&&(t.category===e.category&&(!(!r.includes("action")||!i.includes("action"))&&(t.action===e.action&&(this.duplicateFeature(e,t,i,r)||this.duplicateContent(e,t,i,r)||this.duplicateMilestone(e,t,i,r))))))}duplicateFeature(e,t,i,r){return"Feature"===t.category&&"Feature"===e.category&&t.name===e.name}duplicateContent(e,t,i,r){return"Content"===t.category&&"Content"===e.category&&(!r.includes("type")&&!i.includes("type")||t.type===e.type&&(!r.includes("identifier")&&!i.includes("identifier")||t.identifier===e.identifier&&(!r.includes("details")&&!i.includes("details")||t.details===e.details)))}duplicateMilestone(e,t,i,r){return"Feature"!==t.category&&"Feature"!==e.category&&("Content"!==t.category&&"Content"!==e.category&&(t.name===e.name&&t.details===e.details))}async journey(){return await Ft("view-journey")}async storeJourney(e){await Rt("view-journey",e)}async reset(){return this.restoreJourney=await this.journey(),await Lt("view-journey"),await this.storeJourney([]),this.restoreJourney}async restore(e=null){let t=await this.journey(),i=e||this.restoreJourney;null!==t&&t.length&&(i=i.concat(t)),i.sort((function(e,t){return e.timestamp<t.timestamp?-1:e.timestamp>t.timestamp?1:0})),await this.storeJourney(i),this.restoreJourney=[]}hasClassInHierarchy(e,t,i){const r=(e,t,i,a)=>!(a>=i)&&(!!e.className.toString().includes(t)||!!e.parentElement&&r(e.parentElement,t,i,a+1));return r(e,t,i,0)}decipherParamsPerLibrary(e){if(e.has("xenonSrc"))return[e.get("xenonSrc"),e.get("xenonId")];if(e.has("cr_campaignid"))return["Cerebro",e.get("cr_campaignid")];if(e.has("utm_source")&&"klaviyo"===e.get("utm_source").toLowerCase()){return["Klaviyo"+(e.has("utm_medium")?" - "+e.get("utm_medium"):""),e.get("utm_campaign")]}return e.has("g_campaignid")?["Google Ad",e.get("g_campaignid")]:e.has("utm_source")&&"shareasale"===e.get("utm_source").toLowerCase()||e.has("sscid")?["Share-a-sale",e.get("sscid")]:e.has("g_adtype")&&"none"===e.get("g_adtype")?["Google Organic",e.get("g_campaign")]:e.has("g_adtype")&&"search"===e.get("g_adtype")?["Google Paid Search",e.get("g_campaign")]:e.has("utm_source")&&"facebook"===e.get("utm_source")?["Facebook Ad",e.get("utm_campaign")]:e.has("utm_source")&&"email-broadcast"===e.get("utm_source").toLowerCase()?["Email",e.get("utm_campaign")]:e.has("utm_source")&&"youtube"===e.get("utm_source").toLowerCase()?["YouTube",e.get("utm_campaign")]:e.has("utm_source")?[e.get("utm_source"),e.get("utm_campaign")]:["Unattributed"]}async autodiscoverLeadFrom(e){if(e&&""!==e&&"?"!==e){const t=new URLSearchParams(e),[i,r]=this.decipherParamsPerLibrary(t);if(await qt("view-attribution"))return e;await Ht("view-attribution",{leadSource:i,leadCampaign:r,leadGuid:null});let a=await qt("view-tags");!i||a&&a.includes(i)||(a?(a.push(i),r&&a.push(r)):(a=[i],r&&a.push(r)),await this.variant(a),"Unattributed"===i?await this.leadUnattributed():await this.leadAttributed(i,r)),t.delete("xenonId"),t.delete("xenonSrc");let o="";return t.size&&(o="?"+t.toString()),o}{let t=await qt("view-tags");const i="Unattributed";return await qt("view-attribution")||(await Ht("view-attribution",{leadSource:i,leadCampaign:null,leadGuid:null}),t&&t.includes(i)||(t?t.push(i):t=[i],await this.variant(t),await this.leadUnattributed())),e}}pageURL(e){this.pageURL_=e}async setPlatformByUserAgent(e,t){const i=new Me(e),r=i.getBrowser(),a=r.name+":"+r.version,o=i.getOS(),s=o.name,n=o.version;await this.platform(t,a,s,n)}};return zt}();
